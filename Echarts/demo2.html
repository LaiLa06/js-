<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title></title>
    <style>
        #main {
            width: 600px;
            height: 400px;
            margin: 0 auto
        }

        .control {
            text-align: center;
            font-weight: bold;
            margin-top: 20px;
        }

        button {
            padding: 10px 15px;
            border: none;
            background-color: orangered;
            color: #fff;cursor:pointer;
        }

    </style>
</head>
<body>
<!-- 为 ECharts 准备一个具备大小（宽高）的 DOM -->
<div id="main"></div>
<div class="control">
    <button id="add"> +</button>
    <button id="min"> -</button>
    <button id="stop"> stop</button>
</div>
<!-- 引入 ECharts 文件 -->
<script src="echarts.min.js"></script>
<script type="text/javascript">
    let main = document.getElementById("main"),
        myEchart = echarts.init(main),
        option = {
            backgroundColor: '#1b1b1b',
            tooltip: {
                formatter: "{a} <br/>{c} {b}"
            },
            toolbox: {
                show: true,
                feature: {
                    mark: {show: true},
                    restore: {show: true},
                    saveAsImage: {show: true}
                }
            },
            series: [
                {
                    name: '速度',
                    type: 'gauge',
                    min: 0,
                    max: 220,
                    splitNumber: 11,
                    radius: '50%',
                    axisLine: {            // 坐标轴线
                        lineStyle: {       // 属性lineStyle控制线条样式
                            color: [[0.09, 'lime'], [0.82, '#1e90ff'], [1, '#ff4500']],
                            width: 3,
                            shadowColor: '#fff', //默认透明
                            shadowBlur: 10
                        }
                    },
                    axisLabel: {            // 坐标轴小标记
                        textStyle: {       // 属性lineStyle控制线条样式
                            fontWeight: 'bolder',
                            color: '#fff',
                            shadowColor: '#fff', //默认透明
                            shadowBlur: 10
                        }
                    },
                    axisTick: {            // 坐标轴小标记
                        length: 15,        // 属性length控制线长
                        lineStyle: {       // 属性lineStyle控制线条样式
                            color: 'auto',
                            shadowColor: '#fff', //默认透明
                            shadowBlur: 10
                        }
                    },
                    splitLine: {           // 分隔线
                        length: 25,         // 属性length控制线长
                        lineStyle: {       // 属性lineStyle（详见lineStyle）控制线条样式
                            width: 3,
                            color: '#fff',
                            shadowColor: '#fff', //默认透明
                            shadowBlur: 10
                        }
                    },
                    pointer: {           // 分隔线
                        shadowColor: '#fff', //默认透明
                        shadowBlur: 5
                    },
                    title: {
                        textStyle: {       // 其余属性默认使用全局文本样式，详见TEXTSTYLE
                            fontWeight: 'bolder',
                            fontSize: 20,
                            fontStyle: 'italic',
                            color: '#fff',
                            shadowColor: '#fff', //默认透明
                            shadowBlur: 10
                        }
                    },
                    detail: {
                        backgroundColor: 'rgba(30,144,255,0.8)',
                        borderWidth: 1,
                        borderColor: '#fff',
                        shadowColor: '#fff', //默认透明
                        shadowBlur: 5,
                        offsetCenter: [0, '50%'],       // x, y，单位px
                        textStyle: {       // 其余属性默认使用全局文本样式，详见TEXTSTYLE
                            fontWeight: 'bolder',
                            color: '#fff'
                        }
                    },
                    data: [{value: 40, name: 'km/h'}]
                },
            ]
        };
    myEchart.setOption(option);
    let add = document.getElementById("add"),
        stop = document.getElementById("stop"),
        min = document.getElementById("min"),
        autoTimer = null;
    add.onclick = function () {
        clearInterval(autoTimer);
        autoTimer = setInterval(() => {
            // cur 值类型的，要重新赋值，
            let cur = option['series'][0]['data'][0]['value'];
            option['series'][0]['data'][0]['value'] = cur + 1;
            if (cur >= 220) {
                clearInterval(autoTimer);
                return;
            }
            myEchart.setOption(option);
        }, 100)
    };
    min.onclick = () => {
        clearInterval(autoTimer);
        autoTimer = setInterval(() => {
            let cur = option['series'][0]['data'][0]['value'];
            console.log(cur);
            option['series'][0]['data'][0]['value'] = cur - 1;
            if (cur <= 0) {
                clearInterval(autoTimer);
                return;
            }
            myEchart.setOption(option)

        }, 100)
    };
    stop.onclick = () => {
        clearInterval(autoTimer);
    }

    // 不优化了
</script>
</body>

</html>